<?xml version="1.0" encoding="utf-8"?>
<odoo>
     <record id="mrp_timetracking_wizard_form_view" model="ir.ui.view">
            <field name="name">mrp.timetracking.wizard.form.view</field>
            <field name="model">mrp.timetracking.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <span>Warning: You won't be able to restart your activities on this day if you continue.</span>
                    <group colspan="2" col="1">
                        <field name="workcenter_id" readonly="1"/>
                        <field name="employee_id" readonly="1"/>
                        <field name="incidence_date"/>
                        <field name="description" />
                    </group>
                    <footer>
                        <button name="end_day_button"
                                confirm="Are you sure you want to continue?"
                                string="End Day" class="oe_highlight" type="object"/>
                        <button string="Cancel" class="btn-default" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

     <record id="mrp_timetracking_restriction_wizard_form_view" model="ir.ui.view">
        <field name="name">mrp.timetracking.restriction.wizard.form.view</field>
        <field name="model">mrp.timetracking.restriction.wizard</field>
        <field name="arch" type="xml">
            <form>
                <field name="restriction_ids">
                    <tree create="0" delete="0" editable="bottom">
                        <field name="release_restriction" widget="boolean_toggle"/>
                        <field name="summary" readonly="1"/>
                        <field name="res_id" readonly="1"/>
                        <field name="product_id" readonly="1"/>
                        <field name="workcenter_id" readonly="1"/>
                    </tree>
                </field>
                <footer>
                    <button type="object" name="unlock_restriction_btn" string="Unlock Restriction" class="btn btn-primary"/>
                    <button special="cancel" string="Close" class="btn-default"/>
                </footer>
            </form>
        </field>
    </record>

     <record id="mrp_timetracking_mixed_employee_wizard_form_view" model="ir.ui.view">
        <field name="name">mrp.timetracking.mixed.employee.wizard.form.view</field>
        <field name="model">mrp.timetracking.mixed.employee.wizard</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="department_id"/>
                    <field name="employee_id" domain="[('department_id', '=', department_id)]"/>
                </group>
            </form>
        </field>
     </record>

     <record id="mrp_timetracking_mixed_step_wizard" model="ir.ui.view">
            <field name="name">mrp.timetracking.mixed.step.wizard.form.view</field>
            <field name="model">mrp.timetracking.mixed.step.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <field name="workorder_id" readonly="1"/>
                    <br></br>
                    <button type="object" name="select_all_btn" string="Select All" class="btn btn-secondary"/>
                    <field name="input_type" invisible="1"/>
                    <field name="origin_input_type" invisible="1"/>
                    <field name="field_name" invisible="1"/>
                    <field name="step_type" invisible="1"/>
                    <field name="step_ids">
                        <tree create="0" editable="bottom" delete="0">
                            <field name="finished"/>
                            <field name="step_id" readonly="1"/>
                            <field name="available_wo_qty_progress" readonly="1"/>
                        </tree>
                    </field>
                    <field name="step_count" invisible="1"/>
                    <div class="o_row" attrs="{'invisible': ['|', ('origin_input_type', '!=', 'partial'), ('step_count', '!=', 1)]}">
                        <field name="progress"/>
                        <p> of </p>
                        <field name="limit"/>
                        <field name="product_uom_id" readonly="1"
                               attrs="{'invisible': [('step_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <p attrs="{'invisible': [('step_type', 'not in', ('progress_qty', 'progress_unit'))]}">%</p>
                        <p> (step) </p>
                    </div>
                    <footer>
                        <button type="object" name="calculate_input" string="Save" class="btn btn-primary"/>
                        <button type="object" name="calculate_none" string="None" class="btn btn-danger"/>
                    </footer>
                </form>
            </field>
     </record>
    
     <record id="mrp_timetracking_mixed_wizard_form_view" model="ir.ui.view">
        <field name="name">mrp.timetracking.mixed.wizard.form.view</field>
        <field name="model">mrp.timetracking.mixed.wizard</field>
        <field name="arch" type="xml">
            <form>
                <field name="analytic_id" readonly="1"/><br></br>
                <field name="workcenter_code" readonly="1"/><br></br>
                <field name="timetracking_id" readonly="1"/><br></br><br></br>
                <field name="input_category" invisible="1"/>

                <field name="input_type" widget="radio" options="{'horizontal': true}"/>
                <field name="input_category" widget="radio" invisible="1" />
                <div attrs="{'invisible': [('input_category', '!=', 'add')]}">
                    <field name="block_id" widget="radio" invisible="1"/>
                    <field name="start_date" readonly="1"/>
                    <group>
                        <label for="duration" decoration-danger="duration&lt;=0"/>
                        <div class="o_row">
                            <field name="duration" decoration-danger="duration&lt;=0"/>
                            <button type="object" name="show_duration_calculator_btn"
                                    icon="fa-calculator" help="Calculator" class="calculator_open"/>
                            <p>Day:</p>
                            <field name="day_duration"/>
                            <p>Per:</p>
                            <field name="max_duration"/>
                        </div>
                        <label for="worked_duration" decoration-danger="worked_duration&lt;=0"/>
                        <div class="o_row">
                            <field name="worked_duration" decoration-danger="worked_duration&lt;=0"/>
                            <button type="object" name="show_worked_duration_calculator_btn"
                                    icon="fa-calculator" help="Calculator" class="calculator_open"/>
                        </div>
                        <div class="o_row">
                            <field name="active_on_period" invisible="1"/>
                            <button type="object"  attrs="{'invisible': ['|', ('block_id', '=', False),
                            ('active_on_period', '=', False)]}" help="Get duration from today to start date"
                                    name="get_current_duration_btn" class="oe_stat_button" icon="fa-check-circle"/>
                            <button type="object" help="Get block duration" attrs="{'invisible': [('block_id', '=', False)]}"
                                    name="get_current_block_duration_btn" class="oe_stat_button" icon="fa-calendar-check-o"/>
                            <button type="object" help="Get period duration" attrs="{'invisible': [('block_id', '=', False)]}"
                                    name="get_duration_btn" class="oe_stat_button" icon="fa-flag"/>
                        </div>
                        <br></br>
                    <field name="record_type" invisible="1"/>
                    <label for="qty_operators"/>
                    <div class="o_row">
                        <field name="qty_operators" decoration-danger="qty_operators&lt;=0"/>
                        <button type="object" name="show_qty_operators_calculator_btn"
                                icon="fa-calculator" help="Calculator" class="calculator_open"
                                attrs="{'invisible': [('record_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                    <field name="set_operators" invisible="1"/>
                    <field name="employee_ids" nolabel="1"
                         attrs="{'invisible': ['|', ('set_operators', '=', False),
                            ('qty_operators', '&lt;=', 1)]}">
                        <tree>
                            <field name="department_id" invisible="1"/>
                            <field name="employee_id" domain="[('department_id', '=', department_id)]"/>
                        </tree>
                    </field>
                    <label for="qty_product" attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    <div class="o_row">
                        <field name="qty_product" readonly="1" attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <field name="product_uom_id" nolabel="1" readonly="1" attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                    <label for="qty_expected" attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    <div class="o_row">
                        <field name="qty_expected" readonly="1" attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <field name="product_uom_id" nolabel="1" readonly="1"
                        attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                </group>
                </div>
                <field name="workorder_id" invisible="1"/>
                <field name="tracking_origin" invisible="1"/>
                 <group attrs="{'invisible': ['|', ('tracking_origin', '=', 'step'), ('input_type', '=', 'total')]}">

                    <field name="wo_step_type" invisible="1"/>
                    <field name="wo_step_product" invisible="1"/>
                    <field name="wo_step_product_uom" invisible="1"/>
                     <div class="o_row" attrs="{'invisible': ['|', ('tracking_origin', '=', 'step'),
                                                        ('input_type', '!=', 'partial')]}">
                        <label for="wo_step_id"/>
                        <field name="wo_step_id" options="{'no_create': True, 'no_edit': True, 'no_open': True}"
                            attrs="{'required': [('input_type', '=', 'partial')]}"/>
                    </div>
                 </group>
                <group attrs="{'invisible': ['|', ('tracking_origin', '=', 'step'), ('input_type', '=', 'total')]}">
                     <div class="o_row" attrs="{'invisible': ['|', ('tracking_origin', '=', 'step'),
                                                        ('input_type', '!=', 'fixed')]}">
                        <label for="wo_step_ids"/>
                        <field name="wo_step_ids" readonly="1" nolabel="1" widget="many2many_tags"/>
                        <button type="object" name="show_progress_step_btn"
                                icon="fa-list" help="Steps"
                                attrs="{'invisible': [('record_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                        <button type="object" name="show_qty_progress_step_btn"
                                icon="fa-list" help="Steps"
                                attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                    <field name="step_count" invisible="1"/>
                </group>
                <group attrs="{'invisible': [('wo_step_id', '!=', False)]}">
                    <label for="progress" attrs="{'invisible': [('record_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                    <div class="o_row">
                        <field name="progress"  attrs="{'invisible': ['|', ('input_type', 'in', ('total', 'fixed')), ('record_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                        <field name="string_value" readonly="1"
                               attrs="{'invisible': [('input_type', 'in', ('single', 'partial'))]}"/>

                        <p attrs="{'invisible': [('record_type', 'not in', ('progress_qty', 'progress_unit'))]}">%</p>
                         <button type="object" name="show_progress_calculator_btn"
                                    icon="fa-calculator" help="Calculator" class="calculator_open"
                                    attrs="{'invisible': ['|', ('input_type', '=', 'total'),
                                          ('record_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                        <p attrs="{'invisible': ['|', ('tracking_origin', '=', 'step'),
                                                ('record_type', 'not in', ('progress_qty', 'progress_unit'))]}">Wo</p>
                        <p attrs="{'invisible': [('record_type', 'not in', ('progress_qty', 'progress_unit'))]}">Accum:</p>
                        <field name="accum_progress"  attrs="{'invisible': [('record_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                    <label for="qty_progress" attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    <div class="o_row">
                        <field name="qty_progress" readonly="0"
                               attrs="{'invisible': ['|', ('input_type', 'in', ('total', 'fixed')), ('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <field name="product_uom_id" nolabel="1" readonly="1"
                               attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <button type="object" name="show_qty_progress_calculator_btn"
                                icon="fa-calculator" help="Calculator" class="calculator_open"
                                attrs="{'invisible': ['|', ('input_type', '=', 'total'),
                                       ('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <p attrs="{'invisible': ['|', ('tracking_origin', '=', 'step'),
                                                 ('record_type', 'in', ('progress_qty', 'progress_unit'))]}">Wo</p>
                        <p attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}">Accum:</p>
                         <field name="accum_qty"  attrs="{'invisible': [('record_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                    <div class="o_row" attrs="{'invisible': ['|', ('input_type', 'in', ('total', 'fixed')),
                                                             ('step_count', '!=', 0)]}">
                        <button type="object" name="calculate_25" string = "25%"/>
                        <button type="object" name="calculate_50" string = "50%"/>
                        <button type="object" name="calculate_75" string = "75%"/>
                    </div>
                </group>
<!--                For single steps-->
                <group attrs="{'invisible': [('wo_step_id', '=', False)]}">
                    <label for="wo_step_progress" attrs="{'invisible': [('wo_step_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                    <div class="o_row">
                        <field name="wo_step_progress"  attrs="{'invisible': [('wo_step_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                         <p attrs="{'invisible': [('wo_step_type', 'not in', ('progress_qty', 'progress_unit'))]}">%</p>
                         <button type="object" name="show_wo_step_progress_calculator_btn"
                                    icon="fa-calculator" help="Calculator" class="calculator_open"
                                    attrs="{'invisible': [('wo_step_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                        <p attrs="{'invisible': [('wo_step_type', 'not in', ('progress_qty', 'progress_unit'))]}">Accum:</p>
                        <field name="accum_wo_step_progress"  attrs="{'invisible': [('wo_step_type', 'not in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                    <label for="wo_step_qty_progress" attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    <div class="o_row">
                        <field name="wo_step_qty_progress" readonly="0"
                               attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <p attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}">of:</p>

                        <field name="wo_step_product_qty" nolabel="1" readonly="1"
                               attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <field name="wo_step_product_uom" nolabel="1" readonly="1"
                               attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                        <button type="object" name="show_wo_step_qty_progress_calculator_btn"
                                icon="fa-calculator" help="Calculator" class="calculator_open"
                                attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                         <p attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}">Accum:</p>
                         <field name="accum_wo_step_qty"  attrs="{'invisible': [('wo_step_type', 'in', ('progress_qty', 'progress_unit'))]}"/>
                    </div>
                    <div class="o_row">
                        <button type="object" name="calculate_step_25" string = "25%"/>
                        <button type="object" name="calculate_step_50" string = "50%"/>
                        <button type="object" name="calculate_step_75" string = "75%"/>
                    </div>
                </group>
                <group col="1">
                    <label for="note"/>
                    <field name="note" nolabel="1"/>
                </group>
                <field name="unlock_restriction" invisible="1"/>
                <group col="1" attrs="{'invisible': [('unlock_restriction', '=', False)]}">
                    <label for="restriction_ids"/>
                    <field name="restriction_ids" nolabel="1">
                    <tree create="0" delete="0" editable="bottom">
                        <field name="release_restriction" widget="boolean_toggle"/>
                        <field name="summary" readonly="1"/>
                        <field name="res_id" readonly="1"/>
                        <field name="product_id" readonly="1"/>
                        <field name="workcenter_id" readonly="1"/>
                    </tree>
                </field>
                </group>
                <field name="input_result" invisible="1"/>
                <footer>
                    <div class="alert alert-warning" role="alert" groups="aci_estimation.group_estimation_chief"
                    attrs="{'invisible': [('input_result', '=', 'normal')]}">
                      This will exceed the required qty
                    </div>
                    <button type="object" name="mixed_tracking_btn" string="As Pending" class="btn btn-primary"/>
                    <button type="object" name="mixed_tracking_approval_btn" string="Ask Approval" class="btn btn-primary"/>
                    <button type="object" name="mixed_tracking_blocked_btn" string="As Blocked" class="btn btn-primary"/>
                    <button type="object" name="mixed_tracking_forecast_btn" string="As Prestim" class="btn btn-primary"/>
<!--                    <button type="object" name="mixed_tracking_restrict_btn" string="Save and Restrict" class="btn btn-primary"/>-->
                    <button special="cancel" string="Close" class="btn-default"/>
                </footer>
            </form>

        </field>
    </record>
</odoo>