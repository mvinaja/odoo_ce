<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="add_manufacturing_supervisor_form_view" model="ir.ui.view">
        <field name="name">add.manufacturing.supervisor.form.view</field>
        <field name="model">mrp.production.actions</field>
        <field name="arch" type="xml">
            <form>
                <group >
                    <div colspan="2">
                        <p>
                            Add new supervisor
                        </p>
                    </div>
                    <field name="employee_id" domain="[('valid_employee', '=', True)]"
                           options="{'no_create': True, 'no_edit': True, 'no_open': True}"/>
                </group>
                <footer>
                    <button type="object" name="add_supervisor" string="Ok" class="btn btn-primary"/>
                    <button special="cancel" string="Cancel" class="btn-default"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="cancel_manufacturing_form_view" model="ir.ui.view">
        <field name="name">cancel.manufacturing.form.view</field>
        <field name="model">mrp.production.actions</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <div colspan="2">
                        <p>
                            Are you sure to cancel and delete Manufacturing(s) selected?
                        </p>
                    </div>
                </group>
                <footer>
                    <button type="object" name="cancel_manufacturing" string="Ok" class="btn btn-primary"/>
                    <button special="cancel" string="Cancel" class="btn-default"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="action_cancel_manufacturing" model="ir.actions.act_window">
        <field name="name">Cancel and Delete</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">mrp.production.actions</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="cancel_manufacturing_form_view"/>
    </record>

    <record id="product_template_actions_form_view" model="ir.ui.view">
        <field name="name">product.template.actions.form.view</field>
        <field name="model">product.template.actions</field>
        <field name="mode">primary</field>
        <field name="priority" eval="0"/>
        <field name="arch" type="xml">
            <form>
                <sheet>
                        <group>
                            <group>
                                <label for="action" colspan="2"/>
                                <div class="o_row" colspan="2" style="margin-left: 32px;">
                                    <field name="action" widget="radio" required="1"/>
                                </div>
                            </group>
                            <group>
                                <label for="source_ids" domain="[('is_quality_control', '=', True)]"
                                       colspan="2" attrs="{'invisible': [('action','=','replace')]}"/>
                                <label for="source_target_ids" colspan="2" attrs="{'invisible': [('action','!=','replace')]}"/>
                                <field name="source_ids" nolabel="1" domain="[('is_quality_control', '=', True)]"
                                       options="{'no_create': True}" attrs="{'invisible': [('action','=','replace')]}">
                                    <tree>
                                        <field name="product_tmpl_id"/>
                                        <field name="complete_name" string="Restriction"/>
                                    </tree>
                                </field>
                                <field name="source_target_ids" nolabel="1" colspan="2" attrs="{'invisible': [('action','!=','replace')]}">
                                    <tree editable="top">
                                        <field name="source_tmpl" options="{'no_create': True}"  domain="[('is_quality_control', '=', True)]"/>
                                        <field name="source"  options="{'no_create': True}" domain="[('product_tmpl_id','=', source_tmpl),
                                                                                                     ('is_quality_control', '=', True)]"/>
                                        <field name="target_tmpl" options="{'no_create': True}" domain="[('is_quality_control', '=', True)]"/>
                                        <field name="target" options="{'no_create': True}" domain="[('product_tmpl_id','=', target_tmpl),
                                                                                                     ('is_quality_control', '=', True)]"/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                        <group string="Products">
                            <field name="product_tmpl_ids" nolabel="1" options="{'no_create': True}" colspan="2"
                                domain="[('bom_type', '=', 'workorder')]">
                                <tree>
                                    <field name="name"/>
                                </tree>
                            </field>
                        </group>
                    </sheet>
                    <footer>
                        <button type="object" name="append_value_btn" string="Append Values" class="btn-primary" attrs="{'invisible':[('action','!=','append')]}"/>
                        <button type="object" name="remove_value_btn" string="Remove Values" class="btn-primary" attrs="{'invisible':[('action','!=','remove')]}"/>
                        <button type="object" name="replace_btn" string="Replace Values" class="btn-primary" attrs="{'invisible':[('action','!=','replace')]}"/>
                        <button string="Cancel" class="btn-default" special="cancel"/>
                    </footer>
            </form>
        </field>
    </record>

    <record id="product_template_actions_wizard_action" model="ir.actions.act_window">
            <field name="name">Quality Restriction Configurator</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.template.actions</field>
            <field name="target">new</field>
            <field name="view_ids"
               eval="[(5, 0, 0), (0, 0, {'view_mode': 'form', 'view_id': ref('product_template_actions_form_view')})]"/>
        </record>

    <menuitem id="product_template_actions_wizard_menu"
        name="Quality Restriction Configurator"
        parent="aci_product.mrp_create_product_menu"
        action="product_template_actions_wizard_action"
        sequence="45"/>
</odoo>
