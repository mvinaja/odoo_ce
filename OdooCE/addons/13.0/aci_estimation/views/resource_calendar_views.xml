<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Inherit calendar form to add schedule leave tab-->
    <record id="schedule_leave_inherit_calendar_form_view" model="ir.ui.view">
        <field name="name">schedule.leave.inherit.calendar.form.view</field>
        <field name="model">resource.calendar</field>
        <field name="inherit_id" ref="resource.resource_calendar_form"/>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//notebook" position="inside">
                    <page string="Schedule Leaves">
                        <field name="schedule_leave_ids" context="{'default_calendar_id': id}">
                            <tree editable="top">
                                <field name="name"/>
                                <field name="dayofweek"/>
                                <field name="hour_from" widget="float_time"/>
                                <field name="hour_to" widget="float_time"/>
                                <field name="calendar_id" invisible="1"/>
                            </tree>
                        </field>
                    </page>
                </xpath>

                <field name="attendance_ids" position="replace">
                     <field name="attendance_ids">
                         <tree editable="top">
                            <field name="name"/>
                            <field name="dayofweek"/>
                            <field name="hour_from" widget="float_time"/>
                            <field name="hour_to" widget="float_time"/>
                         </tree>
                     </field>
                </field>
            </data>
        </field>
    </record>

    <!-- Menus-->

    <!-- Inherit from MRP for modify groups -->
    <menuitem id="mrp.menu_view_resource_calendar_search_mrp"
        action="resource.action_resource_calendar_form"
        parent="mrp.menu_mrp_configuration"
        sequence="10"
        groups="mrp.group_mrp_manager"/>

    <!-- Inherit from MRP for modify groups -->
<!--    <menuitem id="mrp.menu_view_resource_calendar_leaves_search_mrp"-->
<!--        action="resource.action_resource_calendar_leave_tree"-->
<!--        parent="mrp.menu_pm_resources_config"-->
<!--        sequence="20"-->
<!--        groups="mrp.group_mrp_manager"/>-->

    <!-- ACI: Add Resource calendar menus to Employees module -->

    <!-- Resource calendar parent menu -->
    <menuitem id="aci_resources_config_menu"
        name="Resources"
        parent="hr.menu_human_resources_configuration"
        sequence="10"/>

    <!-- Resource calendar parent menu -->
    <menuitem id="aci_resource_calendar_search_hr_menu"
        action="resource.action_resource_calendar_form"
        parent="aci_resources_config_menu"
        groups="hr.group_hr_manager"
        sequence="10"/>

    <!-- Resource calendar parent menu -->
    <menuitem id="aci_resource_calendar_leaves_search_hr_menu"
        action="resource.action_resource_calendar_leave_tree"
        parent="aci_resources_config_menu"
        groups="hr.group_hr_manager"
        sequence="20"/>

    <!-- ACI: Add Resource calendar menus to Attendance module -->

    <!-- Resource calendar parent menu -->
    <menuitem id="aci_attendane_resources_config_menu"
        name="Resources"
        parent="hr_attendance.menu_hr_attendance_settings"
        sequence="15"/>

    <!-- Resource calendar parent menu -->
    <menuitem id="aci_resource_calendar_search_att_menu"
        action="resource.action_resource_calendar_form"
        parent="aci_attendane_resources_config_menu"
        groups="hr.group_hr_manager"
        sequence="10"/>

    <!-- Resource calendar parent menu -->
    <menuitem id="aci_resource_calendar_leaves_search_att_menu"
        action="resource.action_resource_calendar_leave_tree"
        parent="aci_attendane_resources_config_menu"
        groups="hr.group_hr_manager"
        sequence="20"/>

</odoo>
