<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="hr_contract_inherit_wkcenter_tree_view" model="ir.ui.view">
        <field name="name">hr_contract.inherit.wkcenter.tree.view</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="attributes">
                <attribute name="editable">bottom</attribute>
            </xpath>

            <xpath expr="//field[@name='employee_id']" position="attributes">
                <attribute name="attrs">{'readonly': True}</attribute>
            </xpath>
            <field name="employee_id" position="after">
                <field name="workcenter_ids" widget="many2many_tags"/>
            </field>
        </field>
    </record>
    <!-- Inherit contract form view -->
    <record id="aci_estimation_inherit_contract_form_view" model="ir.ui.view">
        <field name="name">aci.estimation.inherit.contract.form.view</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
        <field name="arch" type="xml">
            <field name="hr_responsible_id" position="before">
                <field name="period_group_id"/>
            </field>
            <!-- Add tolerance type and tolerance time -->
            <field name='hr_responsible_id' position="after">
                <field name="tolerance" required="1"/>
                <field name="tolerance_time"
                attrs="{'invisible': [('tolerance', '=', 'open')]}"/>
                <field name="modify_delay" help="Allows to modify delay Block"/>
            </field>
            <field name="department_id" position="after">
                <field name="workcenter_ids" widget="many2many_tags"
                    options="{'no_create': True, 'no_create_edit':True}"/>
            </field>
        </field>
    </record>

    <!-- Inherit contract tree view -->
    <!-- Add button action to generate massive contracts -->
    <record id="aci_estimation_inherit_contract_tree_view" model="ir.ui.view">
        <field name="name">aci.estimation.inherit.contract.tree.view</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_tree"/>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//tree" position="attributes">
                    <attribute name="action">
                        [{
                            "name": "Change Period Group",
                            "act": "assign_period_group_to_contract_btn",
                            "views": [{"module": "aci_estimation", "xml_id": "assign_period_group_to_contract_form_view", "type": "form"}],
                            "src_model": "hr_contract",
                            "res_model": "hr.contract.actions",
                            "mode": "model",
                            "context": {"source_model_tmp": "hr.contract"}
                        },{
                            "name": "Change Workcenter",
                            "act": "assign_workcenter_to_contract_btn",
                            "views": [{"module": "aci_estimation", "xml_id": "assign_workcenter_to_contract_form_view", "type": "form"}],
                            "src_model": "hr_contract",
                            "res_model": "hr.contract.actions",
                            "mode": "model",
                            "context": {"source_model_tmp": "hr.contract"}
                        }]
                    </attribute>
                </xpath>
            </data>
        </field>
    </record>
</odoo>
