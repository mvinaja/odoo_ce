<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="lbm_workorder_tree_view_inherit" model="ir.ui.view">
        <field name="name">lbm.workorder.tree.view.inherit</field>
        <field name="model">lbm.workorder</field>
        <field name="inherit_id" ref="aci_lbm_flowline.lbm_workorder_tree_view"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="attributes">
                    <attribute name="action">
                        [{
                            "title": "Activity Configurator",
                            "icon": "btn-secondary fa fa-clock-o",
                            "act": "activity_configurator_btn",
                            "views": [{"module": "aci_estimation", "xml_id": "mail_activity_configurator_form_view",
                                     "type": "form"}],
                            "binding_model": "lbm.workorder",
                            "res_model": "mail.activity.configurator",
                            "mode": "model",
                            "context": {"source_res_model": "lbm.workorder"}
                        },{
                            "title": "Block WorkOrder",
                            "icon": "btn-secondary fa fa-lock",
                            "act": "block_workorder_btn",
                            "method": "block_workorder_btn",
                            "src_model": "lbm.workorder"
                        },{
                            "title": "Open WorkOrder",
                            "icon": "btn-secondary fa fa-unlock",
                            "act": "open_workorder_btn",
                            "method": "open_workorder_btn",
                            "src_model": "lbm.workorder"
                        },{
                            "title": "Random Mixed Tracking",
                            "icon": "btn-secondary fa fa-exchange",
                            "act": "random_tracking_btn",
                            "method": "random_tracking_btn",
                            "src_model": "lbm.workorder"
                        },{
                            "title": "Change Tracking Type",
                            "icon": "btn-secondary fa fa-arrows-v",
                            "act": "change_tracking_btn",
                            "method": "change_tracking_btn",
                            "src_model": "lbm.workorder"
                        }]
                    </attribute>
            </xpath>
            <field name="date_end" position="after">
                <field name="manage_type"/>
                <field name="timetracking_type"/>
                <field name="use_restriction"
                    groups="aci_estimation.group_estimation_chief"/>
                <field name="active_restriction_count"/>
                <field name="can_be_planned" widget="boolean_toggle"
                       attrs="{'readonly': [('use_restriction', '=', True)]}"/>
            </field>
            <field name="product_id" position="after">
                <button name="show_workorder_btn" type="object" help="WorkOrder"
                    class="oe_stat_button" widget="statinfo" icon="fa-external-link"/>
            </field>
        </field>
    </record>
    <record id="lbm_workorder_search_view_inherit" model="ir.ui.view">
        <field name="name">lbm_workorder_search_view_inherit</field>
        <field name="model">lbm.workorder</field>
        <field name="inherit_id" ref="aci_lbm_flowline.lbm_workorder_search_view"/>
        <field name="arch" type="xml">
            <field name="warehouse_id" position="after">
                <separator/>
                <filter name="render" string="Render" domain="[('render', '=', True)]" />
                <filter name="lookahead" string="In LookAHead" domain="[('lookahead_active', '=', True)]" />
                <filter name="planned" string="Planned" domain="[('period_id', '!=', False)]" />
                <separator/>
                <filter name="trackstep" string="Can track step" domain="[('track_workstep', '=', True)]" />
                <filter name="type_mixed" string="Tracking Mixed" domain="[('timetracking_type', '=', 'mixed')]" />
                <filter name="type_wo" string="Tracking by workorder" domain="[('timetracking_type', '=', 'workorder')]" />
            </field>
        </field>
    </record>

    <record id="lbm_workorder_tree_restriction_view" model="ir.ui.view">
        <field name="name">lbm.workorder.tree.restriction.view</field>
        <field name="model">lbm.workorder</field>
        <field name="arch" type="xml">
            <tree decoration-danger="delayed" editable="bottom" create="0" delete="0"
                    action='[{
                            "title": "Activity Configurator",
                            "icon": "btn-secondary fa fa-clock-o",
                            "act": "activity_configurator_btn",
                            "views": [{"module": "aci_estimation", "xml_id": "mail_activity_configurator_form_view",
                                     "type": "form"}],
                            "binding_model": "lbm.workorder",
                            "res_model": "mail.activity.configurator",
                            "mode": "model",
                            "context": {"source_res_model": "lbm.workorder"}
                        },{
                            "title": "Block WorkOrder",
                            "icon": "btn-secondary fa fa-lock",
                            "act": "block_workorder_btn",
                            "method": "block_workorder_btn",
                            "src_model": "lbm.workorder"
                        },{
                            "title": "Open WorkOrder",
                            "icon": "btn-secondary fa fa-unlock",
                            "act": "open_workorder_btn",
                            "method": "open_workorder_btn",
                            "src_model": "lbm.workorder"
                        }]'>
                <field name="delayed" invisible="1"/>
                <field name="warehouse_id" readonly="1"/>
                <field name="baseline_id" readonly="1"/>
                <field name="scenario_id" readonly="1"/>
                <field name="production_id" readonly="1"/>
                <field name="product_id" readonly="1"/>
                <field name="analytic_id"/>
                <field name="workcenter_id" readonly="1"/>
                <field name="min_crew" readonly="1"/>
                <field name="task_crew" readonly="1"/>
                <field name="operators_qty" readonly="1"/>
                <field name="operation_time" readonly="1"/>
                <field name="date_start" readonly="1"/>
                <field name="date_end" readonly="1"/>
                <field name="can_be_planned" widget="boolean_toggle" readonly="1"/>
            </tree>
        </field>
    </record>
</odoo>